# 트랜잭션

## 트랜잭션(Transaction)이란?
- 하나의 연속적인 업무의 단위를 말함.
- 트랜잭션에 의한 관계는 `필수적인 관계 형태`를 가짐
- 하나의 트랜잭션에는 여러 SELECT, INSERT, DELETE, UPDATE 등이 포함될 수 있다.
- ex) 계좌이체
  - A 고객이 B 고객에게 100만원을 이체를 가정한다.
    1) A 고객의 잔액이 100만원 이상인지 확인
    2) 이상이면, A 고객의 잔액을 -100 UPDATE
    3) B 고객의 잔액을 +100 UPDATE
  - 이 때 2번과 3번의 과정이 동시에 수행되어야한다.
  - 즉, 모두 성공하거나 모두 취소되어야 한다(All or Nothing)
  - 이런 특성을 갖는 `연속적인 업무 단위`를 트랜잭션이라고 부른다.

### 주의
1. A고객 잔액 차감과 B 고객 잔액 가산이 `서로 독립적으로 발생하면 안된다.`
    - 각각의 INSERT 문으로 개발되면 안된다.
2. `부분 commit 불가`
    - 동시 commit 또는 rollback 처리

### 트랜잭션의 특성
1. 원자성
   - 트랜잭션에서 정의된 연산들은 모두 성공적으로 실행되던지, 아니면 전혀 실행되지 않은 상태
2. 고립성
   - 트랜잭션이 실행되는 도중에 다른 트랜잭션의 영향을 받아 잘못된 결과를 만들어서는 안된다.
3. 지속성
   - 트랜잭션이 성공적으로 수행되면 그 트랜잭션이 갱신한 데이터베이스 내용은 `영구적`으로 저장
4. 일관성
   - 트랜잭션이 실행되기 전의 데이터베이스 내용이 잘못되어 있지 않다면 트랜잭션이 실행한 이후에도 데이터베이스 내용에 잘못이 있으면 안된다.

   
<p>

## 필수적, 선택적 관계와 ERD
- 두 엔티티의 관계가 서로 필수적일 때 하나의 트랜잭션을 형성
- 두 엔티티가 서로 독립적으로 수행이 가능하다면 선택적 관계로 표현

### IE 표기법
- `원`을 사용하여 필수적 관계와 선택적 관계를 구분한다.
- 필수적 관계에는 원을 그리지 않는다.
- 선택적 관계에는 관계선 끝에 `원을 그린다.`

### Barker 표기법
- 실선과 점선으로 구분한다.
- `필수적`관계는 관계선을 `실선`으로 표기
- `선택적`관계는 관계선을 `점선`으로 표기
</p>


