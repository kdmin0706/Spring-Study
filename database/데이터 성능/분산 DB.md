# 분산 DB

## 분산 DB 란?
1. 여러 곳으로 분산되어있는 DB를 하나의 가상 시스템으로 사용할 수 있도록 한 DB
2. 논리적으로 동일한 시스템에 속하지만, 컴퓨터 `네트워크를 통해` 물리적으로 분산되어있는 데이터집합

## 분산 DB를 만족하기 위한 6가지 투명성
### 1. 분할 투명성(단편화)
- 하나의 논리적 Relation이 여러 단펴능로 분할되어 각 사본이 여러 site에 저장
### 2. 위치 투명성
- 사용하려는 데이터의 저장 장소 명시 불필요
- 위치 정보가 시스템 카탈로그에 유지
### 3. 지역사상 투명성
- 지역 DBMS와 물리적 DB 사이의 Mapping 보장
### 4. 중복 투명성
- DB 객체가 여러 site에 중복되어 있는지 알 필요가 없는 성질
### 5. 장애 투명성
- 구성요소의 장애에 무관한 트랜잭션의 원자성 유지
### 6. 병행 투명성
- 다수 트랜잭션 동시 수행시 결과의 일관성 유지
- TimeStamp
- 분산 2단계 Locking 이용

## 분산 DB 의 장/단점
### 장점
- 지역 자치성, 신뢰성 가용성, 효용성 융통성
- 빠른 응답속도, 비용절감, 각 지역 사용자 요구 수용
### 단점
- 비용증가, 오류 잠재성 증대, 설계 관리의 복잡성
- 불규칙한 응답속도, 통제의 어려움, 데이터 무결성 위협


## 분산 DB 적용 기법
### 1. 테이블 위치 분산
- 설계된 테이블을 본사와 지사단위로 분산, 위치별 DB 문서 필요
- 테이블 구조에는 변경 X, 타 DB에 중복 생성 X
### 2. 테이블 분할 분산
- 각각의 테이블을 쪼개어 분산
1. 수평분할 : 로우 단위로 분리, 지사별로 다를때, 중복 X
2. 수직분할 : 컬럼 단위로 분리, 각 테이블에 동일한 PK가 있어야한다.
### 3. 테이블 복제 분산
- 동일한 테이블을 다른 지역이나 서버에서 동시에 생성하여 관리하는 유형
1. 부분복제
   - 마스터 DB에서 테이블의 일부의 내용만 다른 지역이나 서버에 위치
   - `통합된 테이블이 존재`한다.
2. 광역복제
   - 마스터 DB 테이블의 내용을 각 지역이나 서버에 존재
   - 본사/지사의 데이터량이 동일하다.
### 4. 테이블 요약 분산
- 지역 간에 또는 서버 간에 데이터가 비슷하지만 서로 다른 유형으로 존재하는 경우
1. 분석 요약
   - 동일한 테이블 구조를 가지고 있으면서 분산되어 있는 `동일`한 내용의   
     데이터(요약정보)를 이용하여 `통합`된 데이터를 산출하는 방식
   - ex) 판매실적 지사A, 지사B
2. 통합 요약
    - 분산되어 있는 `다른` 내용의 데이터를 이용하여 `통합`된 데이터를 산출하는 형식
    - ex) 판매실적 지사A:C제품, 지사B:D제품

## 분산 DB 설계를 고려해야하는 경우
1. 성능이 중요한 사이트
2. 공통코드, 기준정보, 마스터 데이터의 성능향상
3. 실시간 동기화가 요구되지 않는 경우, `Near Real TIme(거의 실시간)` 특징을 가지고 있는 경우
4. 특정 서버에 부하가 집중되어 부하를 분산
5. 백업 사이트를 구성하는 경우