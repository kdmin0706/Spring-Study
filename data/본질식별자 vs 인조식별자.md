# 본질식별자 vs 인조식별자

## 식별자 구분

### 1. 본질 식별자
- 업무에 의해 만들어지는 식별자(꼭 필요한 식별자)
### 2. 인조 식별자
- 인위적으로 만들어지는 식별자(꼭 필요하지 않지만 관리의 편의성 등으로 인위적으로 만들어지는 식별자)
- 본질식별자가 복잡한 구성을 가질 때 인위적으로 생성


### 3. 예시
- ex) 주문과 주문 상세에 대한 엔티티 설계 과정이라면  
      주문이 들어오면 주문 엔티티에는 (주문번호 + 고객번호)를 저장한다. 이 때 주문번호는 PK이다.   
      주문 상세에는 각 주문 별로 어떤 상품에 언제, 몇 개가 주문되었는지 등을 기록한다.
    1. PK : 주문번호 + 상품번호로 설계
       - 주문을 하면 주문번호와 상품번호가 필요하므로 본질식별자(주문번호 + 상품번호)가 된다.
       - 하지만 PK가 주문번호 + 상품번호이면 하나의 주문번호로 같은 상품의 주문 결과를 저장할 수 없다.
    2. PK : 주문번호 + 주문 순번(새로운 컬럼 생성)
       - 하나의 주문에 여러 상품에 대한 주문 결과 저장 기능 -> 주문 순번으로 구분
    3. PK : 주문상세번호(인조식별자 생성)
        - 주문상세번호로 각 주문이력을 구분하기 때문에 같은 주문을 같은 상품이력에 저장될 수 있다.
        - 주문상세번호만이 주식별자이므로 나머지 정보들이 불필요하게 중복 저장될 위험 발생
        - 실제 업무와 상관없는 주문상세번호를 주식별자로 생성하면 쓸모없는 index가 생성된다.
          - PK 생성 시 자동 unique index 생성

### 4. 인조식별자의 단점
1. 중복 데이터 발생 가능성 -> 데이터 품질 저하
2. 불필요한 인덱스 생성 -> 저장 공간 낭비 및 DML 성능 저하
> 인덱스는 원래 조회 성능을 향상시키기 위한 객체이며,  
  인덱스는 `DML(INSERT/UPDATE/DELETE)`시 INSERT SPLIT 현상으로 성능이 저하된다.


