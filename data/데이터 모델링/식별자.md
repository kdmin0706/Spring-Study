# 식별자

## 식별자의 개념
- 하나의 엔티티에 구성된 여러 개 속성 중에 `엔티티를 대표할 수 있는 속성`을 나타냄.
- 하나의 `유일한 식별자`가 존재해야 함.
- `식별자`는 논리 모델링에서 사용하는 용어이다.
- 물리 모델링에서는 `키(key)` 라고 표현한다.
- ex) 학생 엔티티의 주식별자는 학생번호 속성 -> 학생 테이블의 기본 키는 학생번호 컬럼

<p>

## 주식별자의 특징

### 1. 유일성
- 주식별자에 의해 모든 인스턴스를 유일하게 구분함.
- ex) 학생 엔티티에서 이름 속성은 동명 이인이 발생할 수 있으므로  
      모든 인스턴스를 완벽하게 구분할 수 없으므로 학생번호와 같은 유일한 식별자를 주식별자로 사용

### 2. 최소성
- 주식별자를 구성하는 속성은 유일성을 만족하는 최소한의 속성으로 구성
- ex) 학생 엔티티의 주식별자는 학생 번호로만 충분한데, 학생번호 + 이름은 구성할 필요 없음.

### 3. 불변성
- 주식별자가 한 번 특정 엔티티에 지정되면 그 식별자 값은 변하지 않아야함.  
  (항상 고유값으로 존재해야함)
- ex) 학생 엔티티에 주식별자인 학생번호가 때에 따라 변경되서는 안된다.


### 4. 존재성
- 주식별자가 지정되면 반드시 값은 존재해야하며 `NULL`은 허용해서는 안된다.

</p>

<p>

## 식별자의 분류

### 1. 대표성 여부에 따른 분류
1. 주식별자
   - 유일성과 최소성을 만족하면서 엔티티를 대표하는 식별자
   - 엔티티 내에서 각 인스턴스를 유일하게 구분할 수 있는 식별자
   - `타 엔티티와 참조 관계를 연결`할 수 있는 식별자
2. 보조식별자
   - 엔티티 내에서 각 인스턴스를 구분할 수 있는 구분자지만, 대표성을 가지지 못해 참조 관계를 연결할 수 없는 식별자
   - 유일성과 최소성은 만족하지만 대표성을 만족하지 못하는 식별자
   - ex) 주민번호 등.

### 2. 생성 여부에 따른 분류
1. 내부식별자
   - 다른 엔티티 참조 없이 엔티티 내부에서 스스로 생성되는 식별자
2. 외부식별자
   - 다른 엔티티와 관계로 인하여 만들어지는 식별자(`외래키`)
   - 자기 자신의 엔티티에서 필요한 속성이 아닌 자식 엔티티에서 생성되는 속성
   - `참조무결성` 제약 조건에 따른 식별자 특징 보유
   
### 3. 속성 수에 따른 분류
1. 단일식별자 : 하나의 속성으로 구성
2. 복합식별자 : 2개 이상의 속성으로 구성

### 4. 대체 여부에 따른 식별자 분류
1. 본질식별자
   - 비즈니스 프로세스에서 만들어지는 식별자
   - ex) 사번 : 원래 업무적인 의미가 있다.
2. 인조식별자
   - 인위적(비즈니스 프로세스)으로 만들어지는 식별자
   - 자동 증가하는 일련 번호 같은 형태
   - ex) 부서코드, 주문번호 등
</p>

<p>

## 주식별자 도출 기준

### 1. 해당 업무에서 `자우 이용되는 속성`을 `주식별자` 라고 지정한다.
- 같은 식별자 조건을 만족하더라도 업무적으로 더 많이 사용되는 속성을 주식별자로 지정한다.
- ex) 학생번호와 주민번호 중에 학생번호가 주식별자, 주민번호는 보조식별자

### 2. `명칭`이나 `내역` 등과 같은 이름은 피하자
- 이름 자체를 주식별자로 사용하는 행위는 피한다.
- ex) 부서명보다 부서코드를 부여하여 부서코드를 주식별자로 사용한다.

### 3. 속성의 수를 최대한 적게 구성한다.
- 주식별자를 너무 많은 속성으로 구성 시, 조인으로 인한 성능 저하 발생 우려
- 일반적으로 7~8개 이상의 주식별자 구성은 `새로운 인조식별자`를 생성하여 모델로 단순화하는 것이 좋음.
- ex) 주문 엔티티에 주문일자 + 주문상품코드 + 고객번호 + ... 등으로 구성 -> 주문번호 속성 추가
</p>

<p>

## 관계 간 엔티티 구분
### 1. 강한 개체
- 독립적으로 존재할 수 있는 엔티티
- ex) 고객과 계좌 엔티티 중, 고객은 독립적으로 존재할 수 있음.
### 2. 약한 개체
- 독립적으로 존재할 수 없는 엔티티
- ex) 고객과 계좌 엔티티 중, 계좌는 독립적으로 존재할 수 없음(고객에 의해 `파생되는` 엔티티)
</p>


<p>

## 식별관계와 비식별관계

### 1. 식별관계(Identification Relationship)
- 하나의 엔티티의 `기본키`를 다른 엔티티가 `기본키의 하나`로 공유하는 관계
- 식별관계는 ERD에서 실선으로 표시
- 반드시 부모에게 종속된다 / 부모-자식 소멸주기 동일하다.
- 식별자 관계로만 설정 시에 주식별자 오류 유발
- ex) 사원과 교육이력 엔티티에서 양쪽 모두 기본키 중 일부가 사원번호이다.
### 2. 비식별관계(Non-Identification Relationship)
- 강한 개체의 기본키를 다른 엔티티의 기본키가 아닌 `일반속성`으로 관계를 가지는 것
- 비식별관계는 ERD에서 점선으로 표시
- ex) 부서와 사원의 관계에서 부서의 부서번호(기본키)를 사원엔티티에서는 일반키로 가진다.
  (사원에서는 사원번호가 기본키)
- 👉 특징
  1. 상속받은 주식별자 속성을 타 엔티티에 차단한다. 
  2. 부모와 자식의 `생명주기가 다른` 경우(별도로 소멸)
  3. 여러 개 엔티티가 하나의 엔티티로 통합되어 표현했는데 각각의 엔티티가 별도의 관계를 가진 경우
  4. 자식 엔티티에 별도의 주식별자를 생성하는 것이 더 유리한 경우
  5. SQL 문장이 길어져 복잡성 증가되는 것을 방지
     - 약한 연결관계 표현, 점선 표기
     - 비식별자 관계로만 설정 시 부모 엔티티와 조인하여 성능 저하
</p>


